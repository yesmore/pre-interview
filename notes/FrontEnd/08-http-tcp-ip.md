# http

## 原理

### 简介

- 枯燥
- 协议

	- 同现实世界，一式双份/多份
	- 双方/多方都遵从共同的一个规范

		- ’ 按规矩说话 ‘

	- 常见协议：ftp、http、stmp、TCP/IP
	- http协议工作流程

		- 0：原始状态

			- 客户端与服务器没有连接
			- 连接：网络上的虚拟电路

		- 子主题 2

### 基础

- 请求

	- 请求行

		- 请求方法

			- get
			- post
			- put
			- delete
			- trace
			- options

		- 请求路径
		- 协议版本

	- 请求头

		- key：value
		- 头信息里，要标明主体的长度
		- post比get多了主体信息

			- content-Type

	- 空行

		- 即使没有主体信息，也要空行

	- 请求主体

		- 发送内容

- 响应

	- 响应行

		- 协议版本

			- HTTP/1.1

		- 状态码

			- 200

		- 状态字符串

			- OK

	- 响应头信息

		- key：value
		- content-length：主体的长度

	-                                                                              
	- 响应主体

### 请求方法

- 分类

	- GET
	- POST
	- HEAD

		- 效果与get一致，只是不返回内容

	- PUT
	- TRACE

		- 用代理上网，如用代理访问www.baidu.com，你想看看代理有没有修改你的http请求，用该方法来测试，百度会把最后收到的信息返回

	- OPTIONS

		- 返回服务器可用的请求方法

- 子主题 2

### 状态码

- 作用

	- 反应服务器响应情况

- 常见

	- 200 OK

		- 服务器成功返回网页

	- 301/2  

		- 永久/临时重定向
		- header(‘ Location：http：//www.baidu.com ’)

			- 默认是302重定向

		- header(‘ Location：http：//www.baidu.com ’，true，301)

			- 指定用301重定向

	- 307 

		- 重定向中保持原有的请求数据
		- header(‘ Location：http：//www.baidu.com ’，true，307)

	- 304   NOT Modified

		- 未修改

			- 即取的是浏览器缓存
			- 客户端告诉服务器我有这个图片，不需要再加载一次

	- 404 NOT FOUND

		- 请求的网页不存在

	- 503

		- 服务器暂时不可用

	- 500

		- 服务器内部错误

- 分类

	- 1XX

		- 信息

			- 接收到请求，继续处理

	- 2XX

		- 成功

			- 操作成功地收到，理解和接收

	- 3XX

		- 重定向

			- 为了完成请求，必须采取进一步措施

	- 4XX

		- 客户端错误

			- 请求的语法有错误或不能完全被满足

	- 5XX

		- 服务端错误

			- 服务器无法完成明显有效的请求

### 状态字符串（状态文字）

- 作用

	- 用来描述状态码的，便于人观察

## 实战

### socket编程发送http请求

- 原理

	- 1、连接某url的80端口（打开）

		- socket远程操作文件

	- 2、发送头信息（写）
	- 3、读取网页内容（读）

### HTTP协议与COOKIE

### HTTP协议防盗链

## 优化

### HTTP协议与缓存控制

### HTTP协议与内容压缩

### 持久链接与反向ajax

## web服务器

## Apache
Nginx
iis

## 客户端

## 收到响应
（html代码）







# TCP/IP

## 概述

### 分层

- 链路层

  - 物理媒体

    - 接口

- 网络层

  - 分组选路

    - ip，ICMP、IGMP

- 运输层

  - 端到端的通讯

    - TCP、UDP

- 应用层

  - 处理特定的应用程序细节（用户）

    - Telnet、FTP、e-mail

### 通过路由器连接的两个网络

- 端系统

  - 客户端

- 中间系统

  - 路由器

- 应用层和运输层使用端到端协议
- 网络层提供的是逐跳协议（hop-to-hop）
- 网络ip提供的是一种不可靠的服务，他只是尽可能快的把分组从源结点送到目的结点，但不提供可靠性保障

  - 卖家、买家

- TCP是在不可靠的IP层上提供一个可靠的运输层

  - 快递公司

- 互联网的目的之一就是在应用程序中隐藏所有物理细节

### TCP/IP协议族中不同层次的协议

- TCP

  - 使用不可靠的IP服务，并提供一种可靠的运输层服务

- UDP

  - 为应用程序发送和接收数据，不可靠

- IP

  - 网络层主要协议，同时被TCP和UDP使用

- ICMP

  - IP协议的附属协议
  - ping（应用程序）

### 封装（发送方）

- 本质

  - 每一层添加自身的标记（首部）

    - 应用程序→TCP→IP→以太网驱动程序

- 以太网数据帧的物理特性是其长度必须在46~1500字节之间
- 帧类型域

  - 以太网的帧首部也有一个16bit的帧类型域

- 协议域

  - IP在首部中存入一个长度为8bit的数值，称为协议域

- 端口号

  - TCP和UDP都用一个16bit的端口号来表示不同的应用程序

### 分用（接收方）

- 本质

  - 根据封装时的标记解包

- 根据TCP或UDP首部中的端口号进行分用
- 根据IP首部中 的协议值进行分用
- 根据以太网首部中的帧类型进行分用
- （进入帧）以太网驱动程序

### 端口号

- 分类

  - 临时端口号

    - 又称客户端口号，存在时间很短暂
    - 大多数TCP/IP实现给临时端口分配1024~5000之间的端口号，大于5000的端口号是为其他服务器预留的

  - 目的端口号

    - 即服务器端口号，固定的
    - 服务器一般都是通过知名端口号来识别的（ftp 21，telnet 23）

## 四层

### 链路层

- 即‘以太网和IEEE 802封装’
- 以太网

  - 定义

    - 一般指数字设备公司、英特尔公司和Xerox公司在1982年联合公布的一个标准
    - 它采用一种称作 CSMA/CD的媒体接入方法
    - 它的速率为10 Mb/s，地址为48bit

- IEEE 802封装

  - 分类

    - 802.3针对整个CSMA/CD网络
    - 802.4针对令牌总线网络
    - 802.5针对令牌环网络

  - 不常用

- 封装格式

  - 以太网

    - 目的
    - 协议
    - 源

  - 802.3

    - 子主题 1

- 环回接口

  - 定义

    - 127开头

  - 特点

    - 传回换回地址（一般是127.0.0.1）任何数据均作为ip输入
    - 任何传给该主机IP地址的数据均送到环回接口

  - 功能

    - 子主题 1

  - 例

    - ping 127.0.0.1

      - ip输出函数ping
      - ICMP
      - ip输入函数

- MTU和路径MTU

  - 最大传输单元

### 网络层

- IP

  - 特点

    - 不可靠
    - 无连接

  - IP首部

    - 组成

      - 4位版本
      - 4位首部长度
      - 8位服务类型TOS

        - 子主题 1

      - 16位总长度（字节数）

    - 选项

  - IP路由选择
  - 特殊IP

  - ip的问题

- ARP

  - ARP高速缓存

  - ARP的分组格式

  - ARP代理

  - 免费ARP

- ICMP

  - 简介

- PING
- Traceroute
- IP选路

## 协议分析

### FTP

- 简介

  - 数据传输主流协议
  - 两个信道

    - 控制信道
    - 数据信道

  - FTP两个模式

    - Active Mode
    - Passive Mode

- Active Mode

  - 客户端发送

- Passive Mode

  - 服务器

- 防火墙或NAT设备对FTP的影响

### Telnet

- 简介

- 特点

  - 不安全
  - 交互数据流

### http

- 简介

- 特点

  - 哑服务器
  - 瞬时协议

- cookie问题

  - 让http瞬时看起来是连续的

- 多连接问题

  - 子主题 1

### SMTP/POP3

### SSL

### SNMP

### 语音协议分析

*XMind: ZEN - Trial Version*